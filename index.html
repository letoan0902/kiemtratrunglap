<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập - Hệ thống Kiểm tra Trùng lặp</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card slide-up">
            <!-- Step Progress Indicator -->
            <div class="step-progress">
                <div class="step-indicator active">1</div>
                <div class="step-indicator">2</div>
                <div class="step-indicator">3</div>
                <div class="step-indicator">4</div>
            </div>

            <!-- Auth Steps Container -->
            <div class="auth-steps-container">
                
                <!-- Step 1: Login -->
                <div id="authStep1" class="auth-step active">
                    <h1>Đăng nhập</h1>
                    <p style="text-align: center; color: #666; margin-bottom: 30px;">
                        Vui lòng đăng nhập để sử dụng hệ thống
                    </p>
                    
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="email">Email hoặc Tên đăng nhập</label>
                            <input type="text" id="email" class="form-input" placeholder="Nhập email hoặc tên đăng nhập">
                            <div class="error-message" id="emailError"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">Mật khẩu</label>
                            <div class="password-input-container">
                                <input type="password" id="password" class="form-input password-field" placeholder="Nhập mật khẩu">
                                <button type="button" class="password-toggle" onclick="togglePassword('password', this)" onmouseenter="hoverTogglePassword('password', this, true)" onmouseleave="hoverTogglePassword('password', this, false)">
                                    <!-- SVG mắt ẩn (với gạch) -->
                                    <svg class="password-icon hide-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M4 4L9.87868 9.87868M20 20L14.1213 14.1213M9.87868 9.87868C9.33579 10.4216 9 11.1716 9 12C9 13.6569 10.3431 15 12 15C12.8284 15 13.5784 14.6642 14.1213 14.1213M9.87868 9.87868L14.1213 14.1213M6.76821 6.76821C4.72843 8.09899 2.96378 10.026 2 11.9998C3.74646 15.5764 8.12201 19 11.9998 19C13.7376 19 15.5753 18.3124 17.2317 17.2317M9.76138 5.34717C10.5114 5.12316 11.2649 5 12.0005 5C15.8782 5 20.2531 8.42398 22 12.0002C21.448 13.1302 20.6336 14.2449 19.6554 15.2412" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    
                                    <!-- SVG mắt mở -->
                                    <svg class="password-icon show-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                                        <path fill-rule="evenodd" d="M12,4 C14.7275481,4 17.3356792,5.4306247 19.76629,7.78114976 C20.5955095,8.58304746 21.3456935,9.43915664 22.0060909,10.2956239 C22.4045936,10.8124408 22.687526,11.2189945 22.8424353,11.4612025 L23.1870348,12 L22.8424353,12.5387975 C22.687526,12.7810055 22.4045936,13.1875592 22.0060909,13.7043761 C21.3456935,14.5608434 20.5955095,15.4169525 19.76629,16.2188502 C17.3356792,18.5693753 14.7275481,20 12,20 C9.27245185,20 6.66432084,18.5693753 4.23371003,16.2188502 C3.40449054,15.4169525 2.65430652,14.5608434 1.99390911,13.7043761 C1.59540638,13.1875592 1.31247398,12.7810055 1.15756471,12.5387975 L0.812965202,12 L1.15756471,11.4612025 C1.31247398,11.2189945 1.59540638,10.8124408 1.99390911,10.2956239 C2.65430652,9.43915664 3.40449054,8.58304746 4.23371003,7.78114976 C6.66432084,5.4306247 9.27245185,4 12,4 Z M20.4222529,11.5168761 C19.8176112,10.7327184 19.1301624,9.94820254 18.37596,9.21885024 C16.2825083,7.1943753 14.1050769,6 12,6 C9.89492315,6 7.71749166,7.1943753 5.62403997,9.21885024 C4.86983759,9.94820254 4.18238879,10.7327184 3.57774714,11.5168761 C3.44715924,11.6862352 3.32648802,11.8478224 3.21616526,12 C3.32648802,12.1521776 3.44715924,12.3137648 3.57774714,12.4831239 C4.18238879,13.2672816 4.86983759,14.0517975 5.62403997,14.7811498 C7.71749166,16.8056247 9.89492315,18 12,18 C14.1050769,18 16.2825083,16.8056247 18.37596,14.7811498 C19.1301624,14.0517975 19.8176112,13.2672816 20.4222529,12.4831239 C20.5528408,12.3137648 20.673512,12.1521776 20.7838347,12 C20.673512,11.8478224 20.5528408,11.6862352 20.4222529,11.5168761 Z M12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 C16,14.209139 14.209139,16 12,16 Z M12,14 C13.1045695,14 14,13.1045695 14,12 C14,10.8954305 13.1045695,10 12,10 C10.8954305,10 10,10.8954305 10,12 C10,13.1045695 10.8954305,14 12,14 Z" fill="currentColor"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="error-message" id="passwordError"></div>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="rememberLogin">
                                <span class="checkmark"></span>
                                Lưu thông tin đăng nhập (30 ngày)
                            </label>
                        </div>
                        
                        <button type="submit" id="loginBtn" class="btn btn-primary btn-full">
                            Đăng nhập
                        </button>
                    </form>

                    <div class="step-navigation">
                        <a href="javascript:void(0)" onclick="showForgotPasswordStep1()" class="step-link">Quên mật khẩu?</a>
                    </div>
                </div>

                <!-- Step 2: Email Input -->
                <div id="authStep2" class="auth-step">
                    <h1>Quên mật khẩu</h1>
                    <p style="text-align: center; color: #666; margin-bottom: 30px;">
                        Nhập email hoặc tên đăng nhập để lấy lại mật khẩu
                    </p>
                    
                    <div class="form-group">
                        <label for="forgotEmail">Email hoặc Tên đăng nhập</label>
                        <input type="text" id="forgotEmail" class="form-input" placeholder="Nhập email hoặc tên đăng nhập">
                        <div class="error-message" id="forgotEmailError"></div>
                    </div>
                    
                    <button class="btn btn-primary btn-full" onclick="sendOTP()">Tiếp tục</button>
                    
                    <div class="step-navigation">
                        <a href="javascript:void(0)" onclick="goToLogin()" class="step-link">Quay lại đăng nhập</a>
                    </div>
                </div>

                <!-- Step 3: OTP Verification -->
                <div id="authStep3" class="auth-step">
                    <h1>Xác minh OTP</h1>
                    <p class="step-description">Vui lòng nhập mã xác minh 6 số đã được gửi đến email của bạn</p>
                    
                    <div class="otp-input-container">
                        <input type="text" class="otp-input otp-inputn1" maxlength="1" placeholder="-" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                        <input type="text" class="otp-input otp-input2" maxlength="1" placeholder="-" autocomplete="off" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                        <input type="text" class="otp-input otp-input3" maxlength="1" placeholder="-" autocomplete="off" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                        <input type="text" class="otp-input otp-input4" maxlength="1" placeholder="-" autocomplete="off" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                        <input type="text" class="otp-input otp-input5" maxlength="1" placeholder="-" autocomplete="off" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                        <input type="text" class="otp-input otp-input6" maxlength="1" placeholder="-" autocomplete="off" onkeyup="handleOTPInput(this, event)" onkeydown="handleOTPKeyDown(this, event)">
                    </div>
                    <div class="error-message" id="otpError"></div>
                    
                    <div class="resend-otp">
                        <a href="javascript:void(0)" onclick="resendOTP()">Gửi lại mã</a>
                    </div>
                    
                    <button class="btn btn-primary btn-full" onclick="verifyOTP()">Xác minh</button>
                    
                    <div class="step-navigation">
                        <a href="javascript:void(0)" onclick="goToPrevStep()" class="step-link">Quay lại</a> |
                        <a href="javascript:void(0)" onclick="goToLogin()" class="step-link">Đăng nhập</a>
                    </div>
                </div>

                <!-- Step 4: Password Reset -->
                <div id="authStep4" class="auth-step">
                    <h1>Đặt lại mật khẩu</h1>
                    <p class="step-description">Nhập mật khẩu mới cho tài khoản của bạn</p>
                    
                    <div class="form-group">
                        <label for="newPassword">Mật khẩu mới</label>
                        <div class="password-input-container">
                            <input type="password" id="newPassword" class="form-input password-field" placeholder="Nhập mật khẩu mới (tối thiểu 6 ký tự)">
                            <button type="button" class="password-toggle" onclick="togglePassword('newPassword', this)" onmouseenter="hoverTogglePassword('newPassword', this, true)" onmouseleave="hoverTogglePassword('newPassword', this, false)">
                                <svg class="password-icon hide-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 4L9.87868 9.87868M20 20L14.1213 14.1213M9.87868 9.87868C9.33579 10.4216 9 11.1716 9 12C9 13.6569 10.3431 15 12 15C12.8284 15 13.5784 14.6642 14.1213 14.1213M9.87868 9.87868L14.1213 14.1213M6.76821 6.76821C4.72843 8.09899 2.96378 10.026 2 11.9998C3.74646 15.5764 8.12201 19 11.9998 19C13.7376 19 15.5753 18.3124 17.2317 17.2317M9.76138 5.34717C10.5114 5.12316 11.2649 5 12.0005 5C15.8782 5 20.2531 8.42398 22 12.0002C21.448 13.1302 20.6336 14.2449 19.6554 15.2412" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <svg class="password-icon show-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                                    <path fill-rule="evenodd" d="M12,4 C14.7275481,4 17.3356792,5.4306247 19.76629,7.78114976 C20.5955095,8.58304746 21.3456935,9.43915664 22.0060909,10.2956239 C22.4045936,10.8124408 22.687526,11.2189945 22.8424353,11.4612025 L23.1870348,12 L22.8424353,12.5387975 C22.687526,12.7810055 22.4045936,13.1875592 22.0060909,13.7043761 C21.3456935,14.5608434 20.5955095,15.4169525 19.76629,16.2188502 C17.3356792,18.5693753 14.7275481,20 12,20 C9.27245185,20 6.66432084,18.5693753 4.23371003,16.2188502 C3.40449054,15.4169525 2.65430652,14.5608434 1.99390911,13.7043761 C1.59540638,13.1875592 1.31247398,12.7810055 1.15756471,12.5387975 L0.812965202,12 L1.15756471,11.4612025 C1.31247398,11.2189945 1.59540638,10.8124408 1.99390911,10.2956239 C2.65430652,9.43915664 3.40449054,8.58304746 4.23371003,7.78114976 C6.66432084,5.4306247 9.27245185,4 12,4 Z M20.4222529,11.5168761 C19.8176112,10.7327184 19.1301624,9.94820254 18.37596,9.21885024 C16.2825083,7.1943753 14.1050769,6 12,6 C9.89492315,6 7.71749166,7.1943753 5.62403997,9.21885024 C4.86983759,9.94820254 4.18238879,10.7327184 3.57774714,11.5168761 C3.44715924,11.6862352 3.32648802,11.8478224 3.21616526,12 C3.32648802,12.1521776 3.44715924,12.3137648 3.57774714,12.4831239 C4.18238879,13.2672816 4.86983759,14.0517975 5.62403997,14.7811498 C7.71749166,16.8056247 9.89492315,18 12,18 C14.1050769,18 16.2825083,16.8056247 18.37596,14.7811498 C19.1301624,14.0517975 19.8176112,13.2672816 20.4222529,12.4831239 C20.5528408,12.3137648 20.673512,12.1521776 20.7838347,12 C20.673512,11.8478224 20.5528408,11.6862352 20.4222529,11.5168761 Z M12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 C16,14.209139 14.209139,16 12,16 Z M12,14 C13.1045695,14 14,13.1045695 14,12 C14,10.8954305 13.1045695,10 12,10 C10.8954305,10 10,10.8954305 10,12 C10,13.1045695 10.8954305,14 12,14 Z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="error-message" id="newPasswordError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Xác nhận mật khẩu</label>
                        <div class="password-input-container">
                            <input type="password" id="confirmPassword" class="form-input password-field" placeholder="Nhập lại mật khẩu mới">
                            <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword', this)" onmouseenter="hoverTogglePassword('confirmPassword', this, true)" onmouseleave="hoverTogglePassword('confirmPassword', this, false)">
                                <svg class="password-icon hide-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 4L9.87868 9.87868M20 20L14.1213 14.1213M9.87868 9.87868C9.33579 10.4216 9 11.1716 9 12C9 13.6569 10.3431 15 12 15C12.8284 15 13.5784 14.6642 14.1213 14.1213M9.87868 9.87868L14.1213 14.1213M6.76821 6.76821C4.72843 8.09899 2.96378 10.026 2 11.9998C3.74646 15.5764 8.12201 19 11.9998 19C13.7376 19 15.5753 18.3124 17.2317 17.2317M9.76138 5.34717C10.5114 5.12316 11.2649 5 12.0005 5C15.8782 5 20.2531 8.42398 22 12.0002C21.448 13.1302 20.6336 14.2449 19.6554 15.2412" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <svg class="password-icon show-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                                    <path fill-rule="evenodd" d="M12,4 C14.7275481,4 17.3356792,5.4306247 19.76629,7.78114976 C20.5955095,8.58304746 21.3456935,9.43915664 22.0060909,10.2956239 C22.4045936,10.8124408 22.687526,11.2189945 22.8424353,11.4612025 L23.1870348,12 L22.8424353,12.5387975 C22.687526,12.7810055 22.4045936,13.1875592 22.0060909,13.7043761 C21.3456935,14.5608434 20.5955095,15.4169525 19.76629,16.2188502 C17.3356792,18.5693753 14.7275481,20 12,20 C9.27245185,20 6.66432084,18.5693753 4.23371003,16.2188502 C3.40449054,15.4169525 2.65430652,14.5608434 1.99390911,13.7043761 C1.59540638,13.1875592 1.31247398,12.7810055 1.15756471,12.5387975 L0.812965202,12 L1.15756471,11.4612025 C1.31247398,11.2189945 1.59540638,10.8124408 1.99390911,10.2956239 C2.65430652,9.43915664 3.40449054,8.58304746 4.23371003,7.78114976 C6.66432084,5.4306247 9.27245185,4 12,4 Z M20.4222529,11.5168761 C19.8176112,10.7327184 19.1301624,9.94820254 18.37596,9.21885024 C16.2825083,7.1943753 14.1050769,6 12,6 C9.89492315,6 7.71749166,7.1943753 5.62403997,9.21885024 C4.86983759,9.94820254 4.18238879,10.7327184 3.57774714,11.5168761 C3.44715924,11.6862352 3.32648802,11.8478224 3.21616526,12 C3.32648802,12.1521776 3.44715924,12.3137648 3.57774714,12.4831239 C4.18238879,13.2672816 4.86983759,14.0517975 5.62403997,14.7811498 C7.71749166,16.8056247 9.89492315,18 12,18 C14.1050769,18 16.2825083,16.8056247 18.37596,14.7811498 C19.1301624,14.0517975 19.8176112,13.2672816 20.4222529,12.4831239 C20.5528408,12.3137648 20.673512,12.1521776 20.7838347,12 C20.673512,11.8478224 20.5528408,11.6862352 20.4222529,11.5168761 Z M12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 C16,14.209139 14.209139,16 12,16 Z M12,14 C13.1045695,14 14,13.1045695 14,12 C14,10.8954305 13.1045695,10 12,10 C10.8954305,10 10,10.8954305 10,12 C10,13.1045695 10.8954305,14 12,14 Z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="error-message" id="confirmPasswordError"></div>
                    </div>
                    
                    <div class="checkbox-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="rememberLogin3">
                            <span class="checkmark"></span>
                            Lưu thông tin đăng nhập
                        </label>
                    </div>
                    
                    <button class="btn btn-primary btn-full" onclick="resetPassword()">Cập nhật mật khẩu</button>
                    
                    <div class="step-navigation">
                        <a href="javascript:void(0)" onclick="goToPrevStep()" class="step-link">Quay lại</a> |
                        <a href="javascript:void(0)" onclick="goToLogin()" class="step-link">Đăng nhập</a>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Loading Modal (only for notifications) -->
    <div id="loadingModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <p id="loadingText">Đang khởi tạo...</p>
        </div>
    </div>

    <!-- Application Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/index.js"></script>
</body>
</html> 